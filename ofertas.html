<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Ofertas - Urban Vibe</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="icon" href="img/favicon.png" type="image/png" />
  <link href="https://fonts.googleapis.com/css2?family=Raleway&display=swap" rel="stylesheet" />
  <style>
    html {
      visibility: hidden;
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    html.loaded {
      visibility: visible;
      opacity: 1;
    }

    #header, #footer {
      min-height: 60px;
      background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
      background-size: 200% 100%;
      animation: skeleton-loading 1.5s infinite;
      border-radius: 4px;
    }

    #header.loaded, #footer.loaded {
      background: none;
      animation: none;
      min-height: auto;
    }

    @keyframes skeleton-loading {
      0% { background-position: 200% 0; }
      100% { background-position: -200% 0; }
    }

    main {
      opacity: 0;
      transform: translateY(20px);
      transition: all 0.5s ease;
    }

    main.loaded {
      opacity: 1;
      transform: translateY(0);
    }

    body {
      font-family: 'Raleway', sans-serif;
      padding-top: 100px;
    }

    .card-img-top {
      border-radius: 15px 15px 0 0;
      object-fit: fill;
      height: 280px;
      width: 100%;
      filter: brightness(0.95);
      transition: filter 0.3s ease;
    }

    .card-img-top:hover {
      filter: brightness(1);
    }

    .card {
      border-radius: 15px;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      opacity: 0;
      transform: translateY(30px);
      animation: fadeInUp 0.6s ease forwards;
    }

    .card:hover {
      transform: translateY(-10px);
      box-shadow: 0 12px 24px rgba(0, 0, 0, 0.15);
    }

    .card:nth-child(1) { animation-delay: 0.1s; }
    .card:nth-child(2) { animation-delay: 0.2s; }
    .card:nth-child(3) { animation-delay: 0.3s; }
    .card:nth-child(4) { animation-delay: 0.4s; }
    .card:nth-child(n+5) { animation-delay: 0.5s; }

    @keyframes fadeInUp {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .detalle-overlay {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      color: #fff;
      display: flex;
      justify-content: center;
      align-items: center;
      opacity: 0;
      transition: opacity 0.3s ease;
      border-radius: 15px 15px 0 0;
      cursor: pointer;
      text-decoration: none;
      font-weight: 500;
      font-size: 16px;
    }

    .card:hover .detalle-overlay {
      opacity: 1;
    }
  </style>
</head>
<body>
  <div id="header"></div>

  <main>
    <div class="container text-center mt-5">
      <h2 class="mb-5 fs-4" style="letter-spacing: 8px; font-weight: bolder;">OFERTAS</h2>
      <div id="ofertas-container" class="row row-cols-1 row-cols-sm-2 row-cols-md-4 g-5"></div>
    </div>
  </main>

  <div style="margin-top: 60px; border-top: 1px solid #ccc; width: 80%; margin-left: auto; margin-right: auto;"></div>

  <div id="footer"></div>

  <script>
    const productos = [
      { id: 1, nombre: 'Polera Negra', precio: 89.90, precioAnterior: 119.90 },
      { id: 2, nombre: 'Camiseta Blanca', precio: 49.90, precioAnterior: 69.90 },
      { id: 6, nombre: 'Casaca Urbana', precio: 179.90, precioAnterior: 219.90 },
      { id: 8, nombre: 'Camisa Manga Corta', precio: 99.90, precioAnterior: 119.90 },
      { id: 10, nombre: 'Chaqueta Denim', precio: 149.90, precioAnterior: 189.90 },
      { id: 11, nombre: 'Blusa Floral', precio: 79.90, precioAnterior: 99.90 },
      { id: 13, nombre: 'Vestido Midi', precio: 139.90, precioAnterior: 169.90 },
      { id: 17, nombre: 'Casaca Oversize Mujer', precio: 199.90, precioAnterior: 239.90 },
      { id: 22, nombre: 'Polera con Capucha', precio: 99.90, precioAnterior: 129.90 },
      { id: 30, nombre: 'Casaca Impermeable', precio: 159.90, precioAnterior: 199.90 },
    ];

    const container = document.getElementById('ofertas-container');

    productos.forEach(item => {
      const col = document.createElement('div');
      col.className = 'col';

      const card = document.createElement('div');
      card.className = 'card h-100 border-0 shadow-sm position-relative';

      const img = document.createElement('img');
      img.src = `img/${item.id}.jpg`;
      img.className = 'card-img-top';
      img.alt = item.nombre;
      img.onerror = () => {
        img.src = 'img/placeholder.jpg';
      };

      const overlay = document.createElement('a');
      overlay.href = `/detalle_tienda.html?id=${item.id}`;
      overlay.className = 'detalle-overlay';
      overlay.textContent = 'Ver m√°s info';

      const imgContainer = document.createElement('div');
      imgContainer.style.position = 'relative';
      imgContainer.appendChild(img);
      imgContainer.appendChild(overlay);

      const cardBody = document.createElement('div');
      cardBody.className = 'card-body';

      const nombre = document.createElement('h6');
      nombre.className = 'card-title text-muted';
      nombre.textContent = item.nombre;

      const precio = document.createElement('p');
      precio.className = 'card-text';

      const precioAnterior = document.createElement('span');
      precioAnterior.className = 'text-decoration-line-through text-muted me-1';
      precioAnterior.textContent = `S/. ${item.precioAnterior}`;

      const precioActual = document.createElement('span');
      precioActual.textContent = `S/. ${item.precio}`;

      precio.appendChild(precioAnterior);
      precio.appendChild(precioActual);

      cardBody.appendChild(nombre);
      cardBody.appendChild(precio);
      card.appendChild(imgContainer);
      card.appendChild(cardBody);

      col.appendChild(card);
      container.appendChild(col);
    });
  </script>

  <script src="script.js"></script>
  <script>
    function eliminarParpadeo() {
      const observer = new MutationObserver((mutations) => {
        mutations.forEach((mutation) => {
          if (mutation.type === 'childList') {
            const header = document.getElementById('header');
            const footer = document.getElementById('footer');
            if (header && header.innerHTML.trim() !== '') header.classList.add('loaded');
            if (footer && footer.innerHTML.trim() !== '') footer.classList.add('loaded');
          }
        });
      });

      observer.observe(document.body, {
        childList: true,
        subtree: true
      });
    }

    document.addEventListener('DOMContentLoaded', eliminarParpadeo);

    window.addEventListener('load', () => {
      document.documentElement.classList.add('loaded');
      document.querySelector('main').classList.add('loaded');
    });
  </script>
</body>
</html>
